# 1. Treat .h files as C++ headers.
# 2. Hardcode clang-tidy-12.

--- a/clang_tidy/clang_tidy.bzl
+++ b/clang_tidy/clang_tidy.bzl
@@ -16,6 +16,9 @@
     # add source to check
     args.add(infile.path)
 
+    # treat .h files as C++ headers
+    args.add("--extra-arg-before=-xc++")
+
     # start args passed to the compiler
     args.add("--")
 
--- a/clang_tidy/run_clang_tidy.sh
+++ b/clang_tidy/run_clang_tidy.sh
@@ -11,4 +11,4 @@
 touch $OUTPUT
 truncate -s 0 $OUTPUT
 
-clang-tidy "$@"
+clang-tidy-12 "$@"
